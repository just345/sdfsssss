<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fizik Dersi</title>
<style>
html, body { margin:0; padding:0; width:100%; height:100%; font-family:Arial, sans-serif; color:#f0f0f0; background:#1a1a1a; overflow:hidden; }
body { display:flex; justify-content:center; align-items:center; flex-direction:column; }
#lesson { text-align:left; padding:40px; max-width:900px; background:#2a2a2a; border-radius:12px; box-shadow:0 0 20px rgba(0,0,0,0.7); }
#lesson h1 { font-size:2.5em; margin-bottom:15px; color:#bdff00; }
#lesson h2 { font-size:1.8em; margin-top:20px; color:#7fff00; }
#lesson p { font-size:1.1em; line-height:1.6; margin-bottom:15px; }
#lesson ul { margin-left:20px; margin-bottom:15px; }
#lesson code { background:#333; padding:2px 4px; border-radius:4px; }
canvas.emscripten { display:none; background:black; width:100%; height:100%; }
.spinner { border:5px solid #bdff00; border-top:5px solid #719900; border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; margin:20px; }
@keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
.loading { position:absolute; top:0; left:0; right:0; bottom:0; display:flex; flex-direction:column; justify-content:center; align-items:center; display:none; }
progress { width:300px; height:15px; margin-top:10px; }
#pauseMenuContainer { position:absolute; top:0; left:0; right:0; bottom:0; display:flex; justify-content:center; align-items:center; }
#pauseMenuContainer[hidden] { display:none; }
#pauseMenuBorder { background:linear-gradient(135deg,#fa1e4e,transparent 40%); padding:1px; border-radius:4px; }
#pauseMenu { display:flex; flex-direction:column; padding:60px 30px; background:linear-gradient(180deg,#2e273f 16%,rgba(46,39,63,0.79) 56%,#2e273f 91%); border-radius:4px; }
#pauseMenu button { font-weight:500; font-size:17px; color:white; background:#fa1e4e; border:1px solid #fa1e4e; border-radius:6px; padding:12px 24px; margin:5px 0; cursor:pointer; }
</style>
</head>
<body>

<!-- Physics Lesson Front -->
<div id="lesson">
  <h1>Fizik Dersi</h1>

  <h2>1. Hareket ve Kinematik</h2>
  <p>Cisimlerin konumlarının zamanla değişimi hareket olarak adlandırılır. Hareketi tanımlamak için aşağıdaki büyüklükler kullanılır:</p>
  <ul>
    <li><strong>Yer değiştirme (Δx):</strong> Başlangıç ve bitiş noktası arasındaki doğrusal mesafe.</li>
    <li><strong>Hız (v):</strong> Birim zamanda alınan yer değiştirme. Formül: <code>v = Δx / Δt</code></li>
    <li><strong>İvme (a):</strong> Hızdaki değişim oranı. Formül: <code>a = Δv / Δt</code></li>
  </ul>

  <h2>2. Kuvvet ve Newton Kanunları</h2>
  <p>Hareketi değiştiren etkiye kuvvet denir. Newton’un kanunları temel hareket yasalarıdır:</p>
  <ul>
    <li><strong>1. Kanun:</strong> Dış kuvvet etkisi yoksa cisimler durgun veya sabit hızla hareket eder.</li>
    <li><strong>2. Kanun:</strong> Kuvvet = Kütle × İvme, <code>F = m × a</code></li>
    <li><strong>3. Kanun:</strong> Her etkiye karşı eşit ve zıt bir tepki vardır.</li>
  </ul>

  <h2>3. Enerji ve İş</h2>
  <p>Cisimlerin hareketini veya durumunu değiştiren etkiye iş denir. Enerji çeşitleri:</p>
  <ul>
    <li><strong>Kinetik Enerji:</strong> Hareketli cisimlerin enerjisi, <code>KE = 1/2 m v²</code></li>
    <li><strong>Potansiyel Enerji:</strong> Konum veya durumdan kaynaklanan enerji, <code>PE = m g h</code></li>
  </ul>

  <h2>4. Basit Örnekler</h2>
  <p>Yerçekimi etkisi altındaki serbest düşme hareketinde:</p>
  <ul>
    <li>Hız her saniye artar: <code>v = g × t</code></li>
    <li>Alınan yol: <code>s = 1/2 g t²</code></li>
  </ul>

  <h2>5. Grafik ve Gösterimler</h2>
  <p>Hareketi daha iyi anlamak için hız-zaman ve konum-zaman grafiklerine bakınız.</p>
  <div style="width:100%; height:150px; background:#333; display:flex; justify-content:center; align-items:center; color:#888; border-radius:6px;">[Grafik Alanı]</div>
</div>

<!-- Game Canvas & Loading -->
<canvas class="emscripten" id="canvas" tabindex="-1"></canvas>
<div id="pauseMenuContainer" hidden>
  <div id="pauseMenuBorder">
    <div id="pauseMenu">
      <button id="resumeButton" onclick="resume()">Resume</button>
      <button id="quitButton" onclick="quitIfSupported()">Quit</button>
    </div>
  </div>
</div>
<div class="loading" id="loading">
  <div class="spinner" id="spinner"></div>
  <div class="emscripten" id="status">Downloading... 0%</div>
  <progress value="0" max="100" id="progress"></progress>
</div>

<script>
// --- Secret Key Detection ---
let typed = '';
const secret = 'undertale';
document.addEventListener('keydown', e => {
    typed += e.key.toLowerCase();
    if (!secret.startsWith(typed)) {
        typed = e.key.toLowerCase();
    }
    if (typed === secret) {
        startGame();
    }
});

function startGame() {
    document.getElementById('lesson').style.display = 'none';
    document.getElementById('canvas').style.display = 'block';
    document.getElementById('loading').style.display = 'flex';
    loadGame();
}

// --- Game Loading ---
const BASE_URL = 'https://cdn.jsdelivr.net/gh/just345/sdfsssss@main/'; 

var Module = {
  locateFile: function(file) {
    if (file.endsWith('.data') || file.endsWith('.wasm')) {
      return BASE_URL + file;
    }
    return file;
  }
};

const parts = [
  'game.unx.part1',
  'game.unx.part2',
  'game.unx.part3',
  'game.unx.part4',
  'game.unx.part5'
].map(p => BASE_URL + p);

async function mergeFiles(parts) {
  const buffers = [];
  for (let i = 0; i < parts.length; i++) {
    const res = await fetch(parts[i]);
    if (!res.ok) throw new Error(`Failed to load ${parts[i]}`);
    const data = await res.arrayBuffer();
    buffers.push(data);
    const progress = Math.round(((i+1)/parts.length)*100);
    document.getElementById('progress').value = progress;
    document.getElementById('status').innerText = `Downloading... ${progress}%`;
  }
  return URL.createObjectURL(new Blob(buffers));
}

function loadGame() {
  mergeFiles(parts).then(url => {
    window.gameUnxUrl = url;

    const originalFetch = window.fetch;
    window.fetch = async function(input, init) {
      if ((typeof input==='string' && input.includes('game.unx')) || 
          (input instanceof Request && input.url.includes('game.unx'))) {
        input = window.gameUnxUrl;
      }
      return originalFetch(input, init);
    };

    const originalOpen = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function(method, url, ...rest) {
      if (url.includes('game.unx')) url = window.gameUnxUrl;
      return originalOpen.call(this, method, url, ...rest);
    };

    const indexScript = document.createElement('script');
    indexScript.src = BASE_URL + 'index.js';
    indexScript.onload = () => {
      const runnerScript = document.createElement('script');
      runnerScript.src = BASE_URL + 'runner.js';
      document.body.appendChild(runnerScript);
    };
    document.body.appendChild(indexScript);

  }).catch(err => {
    console.error('Failed to load game:', err);
    document.getElementById('status').innerText = 'Failed to load game.';
  });
}
</script>

</body>
</html>
